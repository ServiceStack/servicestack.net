<!doctype html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TZZ1VK3VGL"></script>
    <script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date()); gtag('config', 'G-TZZ1VK3VGL');</script>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/svg" href="img/logo.svg">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://servicestack.net/feed.xml" />
    <title>Using GitHub for Auto Deployments - Kubernetes Not Required - ServiceStack</title>
    <base href="/" />
    <script>
    if (location.search === "?dark") localStorage.setItem('color-scheme','dark') 
    if (location.search === "?light") localStorage.removeItem('color-scheme') 
    const cls = document.querySelector('html').classList
    if (localStorage.getItem('color-scheme') === 'dark')
        cls.add('dark')
    else
        cls.remove('dark')
    </script>
    <link rel="stylesheet" href="css/app.css">

    <script type="importmap">
{
    "imports": {
        "app.mjs": "./mjs/app.mjs",
        "dtos.mjs": "./mjs/dtos.mjs",
        "vue": "./lib/mjs/vue.mjs",
        "@servicestack/client": "./lib/mjs/servicestack-client.mjs",
        "@servicestack/vue": "./lib/mjs/servicestack-vue.mjs",
        "highlight.mjs": "./lib/mjs/highlight.mjs",
        "core": "./js/core.mjs"
    }
}
</script>
    
    <meta name="twitter:site" content="@ServiceStack" />
    <meta name="twitter:card" content="summary" />
    <meta property="og:description" content="A cost-effective and straightforward web app deployment pattern using GitHub and a single Linux server" />
    <meta property="og:url" content="https://servicestack.net/posts/kubernetes_not_required" />
    <meta property="og:title" content="Using GitHub for Auto Deployments - Kubernetes Not Required" />
    <meta property="og:image" content="./img/posts/kubernetes_not_required/bg.webp" />


</head>
<body class="bg-white dark:bg-black dark:text-white">
<header class="top-0 fixed z-50 h-14 bg-white dark:bg-black opacity-90 w-full shadow pr-3">
    <div class="w-full flex flex-wrap items-center">
        <div class="absolute z-10 top-2 left-2 sm:static flex-shrink flex-grow-0">
            <div class="cursor-pointer">
                <a class="navbar-brand flex items-center" href="./">
                    <svg class="w-8 h-8 sm:ml-2 sm:w-12 sm:h-12 text-gray-900 dark:text-gray-50" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="currentColor" d="M10 6c1.544 1.76 2.276 4.15 2.217 6.61c3.968 1.67 9.924 6.12 11.181 12.39H28C26.051 14.31 14.918 6.77 10 6zm-2 7c4.67 4.913.81 11.582-4 12h18.97C21.5 18.289 11.95 13.533 8 13z"/></svg>
                    <span class="hidden sm:block text-2xl font-bold text-gray-900 dark:text-gray-50">ServiceStack</span>
                </a>
            </div>
        </div>
        <div class="flex flex-grow flex-shrink flex-nowrap justify-end items-center">
            <nav class="relative flex flex-grow leading-6 font-semibold text-slate-700 dark:text-slate-200">
                <ul class="flex flex-wrap items-center justify-end w-full m-0 pb-2 sm:pb-0">
                            <li class="relative flex flex-wrap just-fu-start m-0">
                                <a href="https://localhost:5002/blog" class="p-4 flex items-center justify-start mw-full hover:text-sky-500 dark:hover:text-sky-400">
                                    Blog
                                </a>
                            </li>
                            <li class="relative flex flex-wrap just-fu-start m-0">
                                <a href="https://localhost:5002/posts/" class="p-4 flex items-center justify-start mw-full hover:text-sky-500 dark:hover:text-sky-400">
                                    Archive
                                </a>
                            </li>
                            <li class="relative flex flex-wrap just-fu-start m-0">
                                <a href="https://localhost:5002/podcasts" class="p-4 flex items-center justify-start mw-full hover:text-sky-500 dark:hover:text-sky-400">
                                    Podcasts
                                </a>
                            </li>
                    <li class="relative flex flex-wrap just-fu-start m-0">
                        <div data-component="DarkModeToggle" class="ml-2 w-10"></div>
                    </li>
                </ul>
            </nav>

        </div>
    </div>
</header>
<script type="module">
import { mountAll } from "app.mjs"
mountAll()
</script>


<div class="min-h-screen">
    <main role="main" class="pt-14">
        



<link rel="stylesheet" href="css/typography.css">
<link rel="stylesheet" href="css/lite-yt-embed.css">

<div class="container px-5 mb-32 mx-auto">
        <article class="mt-20">
            <h1 class="text-6xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">
                Using GitHub for Auto Deployments - Kubernetes Not Required
            </h1>
            <div class="flex flex-wrap justify-between">
                <div class="md:mb-12 flex items-center">
                        <a href="posts/author/darren-reid"><img class="w-12 h-12 rounded-full mr-4 text-cyan-600" src="/img/authors/darren.jpg"></a>
                    <div class="flex flex-col">
                            <a class="text-xl font-semibold hover:underline" href="posts/author/darren-reid">Darren Reid</a>
            <ul role="list" class="flex">
                    <li>
                        <a title="Follow on Mastodon" class="mr-1 group flex text-sm font-medium text-zinc-800 transition hover:text-indigo-500 dark:text-zinc-200 dark:hover:text-indigo-500" href="https://reidodon.net/@layoric">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 flex-none text-zinc-500 fill-zinc-500 transition group-hover:fill-indigo-500" width="24" height="24" viewBox="0 0 24 24">
                                <path fill="currentColor" d="M20.94 14c-.28 1.41-2.44 2.96-4.97 3.26c-1.31.15-2.6.3-3.97.24c-2.25-.11-4-.54-4-.54v.62c.32 2.22 2.22 2.35 4.03 2.42c1.82.05 3.44-.46 3.44-.46l.08 1.65s-1.28.68-3.55.81c-1.25.07-2.81-.03-4.62-.5c-3.92-1.05-4.6-5.24-4.7-9.5l-.01-3.43c0-4.34 2.83-5.61 2.83-5.61C6.95 2.3 9.41 2 11.97 2h.06c2.56 0 5.02.3 6.47.96c0 0 2.83 1.27 2.83 5.61c0 0 .04 3.21-.39 5.43M18 8.91c0-1.08-.3-1.91-.85-2.56c-.56-.63-1.3-.96-2.23-.96c-1.06 0-1.87.41-2.42 1.23l-.5.88l-.5-.88c-.56-.82-1.36-1.23-2.43-1.23c-.92 0-1.66.33-2.23.96C6.29 7 6 7.83 6 8.91v5.26h2.1V9.06c0-1.06.45-1.62 1.36-1.62c1 0 1.5.65 1.5 1.93v2.79h2.07V9.37c0-1.28.5-1.93 1.51-1.93c.9 0 1.35.56 1.35 1.62v5.11H18V8.91Z"/>
                            </svg>
                        </a>
                    </li>
                    <li>
                        <a title="Follow on GitHub" class="mr-1 group flex text-sm font-medium text-zinc-800 transition hover:text-indigo-500 dark:text-zinc-200 dark:hover:text-indigo-500" href="https://github.com/layoric">
                            <svg viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6 flex-none text-zinc-500 fill-zinc-500 transition group-hover:fill-indigo-500">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.475 2 2 6.588 2 12.253c0 4.537 2.862 8.369 6.838 9.727.5.09.687-.218.687-.487 0-.243-.013-1.05-.013-1.91C7 20.059 6.35 18.957 6.15 18.38c-.113-.295-.6-1.205-1.025-1.448-.35-.192-.85-.667-.013-.68.788-.012 1.35.744 1.538 1.051.9 1.551 2.338 1.116 2.912.846.088-.666.35-1.115.638-1.371-2.225-.256-4.55-1.14-4.55-5.062 0-1.115.387-2.038 1.025-2.756-.1-.256-.45-1.307.1-2.717 0 0 .837-.269 2.75 1.051.8-.23 1.65-.346 2.5-.346.85 0 1.7.115 2.5.346 1.912-1.333 2.75-1.05 2.75-1.05.55 1.409.2 2.46.1 2.716.637.718 1.025 1.628 1.025 2.756 0 3.934-2.337 4.806-4.562 5.062.362.32.675.936.675 1.897 0 1.371-.013 2.473-.013 2.82 0 .268.188.589.688.486a10.039 10.039 0 0 0 4.932-3.74A10.447 10.447 0 0 0 22 12.253C22 6.588 17.525 2 12 2Z"></path>
                            </svg>
                        </a>
                    </li>
                    <li>
                        <a title="Email Darren Reid" href="mailto:darren@servicestack.com" class="mr-1 group flex text-sm font-medium text-zinc-800 transition hover:text-indigo-500 dark:text-zinc-200 dark:hover:text-indigo-500">
                            <svg class="h-6 w-6 flex-none text-zinc-500 fill-zinc-500 transition group-hover:fill-indigo-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.413-.588T2 18V6q0-.825.588-1.413T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.588 1.413T20 20H4Zm8-7L4 8v10h16V8l-8 5Zm0-2l8-5H4l8 5ZM4 8V6v12V8Z"/></svg>
                        </a>
                    </li>
            </ul>
                    </div>
                </div>
                        <div data-component="pages/podcasts/AudioPlayer.mjs" 
                             data-props="{ id:'kubernetes_not_required', title:'Using GitHub for Auto Deployments - Kubernetes Not Required', src:'https://media.servicestack.com/podcasts/kubernetes_not_required.mp3', beaconUrl:'https://localhost:5002/stats/podcast/record?name=kubernetes_not_required&amp;source=post&amp;version=8.8.1', variant:'compact' }"
                             class="mt-4 md:w-[450px] md:mt-0"></div>
                <div class="mb-4 max-w-sm" data-mail="JoinMailingList" data-props="{ submitLabel:'Join our newsletter' }"></div>
            </div>
            
            <div class="mb-8 md:mb-16 sm:mx-0">
                <div class="sm:mx-0">
                    <img src="./img/posts/kubernetes_not_required/bg.webp" alt="Using GitHub for Auto Deployments - Kubernetes Not Required Background" class="shadow-small">
                </div>
            </div>
            <div class="flex max-w-3xl mx-auto justify-between">
                <div>
                    <div class="mb-4 flex flex-wrap">
                        <a href="posts/tagged/github-actions" class="mr-2 text-xs leading-5 font-semibold bg-slate-400/10 rounded-full py-1 px-3 flex items-center space-x-2 hover:bg-slate-400/20 dark:highlight-white/5">github-actions</a>
                        <a href="posts/tagged/devops" class="mr-2 text-xs leading-5 font-semibold bg-slate-400/10 rounded-full py-1 px-3 flex items-center space-x-2 hover:bg-slate-400/20 dark:highlight-white/5">devops</a>
                        <a href="posts/tagged/hosting" class="mr-2 text-xs leading-5 font-semibold bg-slate-400/10 rounded-full py-1 px-3 flex items-center space-x-2 hover:bg-slate-400/20 dark:highlight-white/5">hosting</a>
                    </div>
                        <div class="max-w-3xl mx-auto">
                            <div class="mb-6 text-lg text-gray-500">
                                <time datetime="2023-08-08T00:00:00.0000000">August 8, 2023</time>
                                <span aria-hidden="true">&middot;</span>
                                <span>24 min read</span>
                            </div>
                        </div>
                </div>
                <div class="flex flex-grow-0">
                    <div data-post="PostVotes"></div>
                    <a href="javascript:;" onclick="document.location.hash='comments'" class="cursor-pointer" title="Jump to comments">
                        <svg class="ml-4 text-gray-700 mt-1 w-7 h-7" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M3 11.2c0 .1 0 .1 0 0c0 .1 0 .1 0 0zM8.3 1C3.9 1 0 3.6 0 6.6c0 2 1.1 3.7 3 4.7s0 .1 0 .1c-.1 1.3-.9 1.7-.9 1.7L.3 14h2c2.5 0 4.3-1.1 5.1-1.9h.8c4.3 0 7.8-2.5 7.8-5.6S12.6 1 8.3 1zm-.1 10.1H7l-.2.2c-.5.5-1.6 1.4-3.3 1.7c.3-.5.5-1.1.5-2v-.3l-.3-.1C1.9 9.7 1 8.3 1 6.6C1 4.2 4.5 2 8.3 2C12 2 15 4 15 6.6c0 2.4-3.1 4.5-6.8 4.5z"/></svg>
                    </a>
                </div>
            </div>
            <div class="max-w-3xl mx-auto">
                <div id="post" class="prose lg:prose-xl max-w-none mb-32">
                    <h2 id="tldr">TL;DR<a class="header-anchor" href="javascript:;" onclick="location.hash='#tldr'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>This post outlines a cost-effective and straightforward approach to deploying your web applications directly from GitHub to a Linux server, without needing Kubernetes. At its core, the process leverages GitHub infrastructure, Docker Compose, SSH, and a Linux server setup with an NGINX reverse proxy and LetsEncrypt for routing, TLS, and certificate management.</p>
<p>The process triggers automatic deployment upon a GitHub event such as a push to the main or master branch, or a new release. GitHub Actions automatically build and push Docker images to the GitHub Container Registry, then securely transfers the Docker Compose file to the remote server. The server pulls the new Docker image and starts the application using Docker Compose.</p>
<p>This system is not exclusive to any specific type of application; it is flexible enough to be adapted to any type of web application that can be containerized using Docker.</p>
<p>Important dependencies for this deployment process include:</p>
<ul>
<li><code>DEPLOY_HOST</code>: IP address or domain name of the deployment server.</li>
<li><code>DEPLOY_USERNAME</code>: SSH username for the deployment server.</li>
<li><code>DEPLOY_KEY</code>: Private SSH key for the deployment server.</li>
<li><code>LETSENCRYPT_EMAIL</code>: Registration email for Let's Encrypt certificate.</li>
</ul>
<p>These secrets are stored in GitHub Action secrets for secure use throughout the end-to-end deployment process. The deployment strategy also needs Docker-enabled Linux server, NGINX for managing routing and a Docker Compose file.</p>
<div class="py-8 max-w-7xl mx-auto px-4 sm:px-6">
    <lite-youtube class="w-full mx-4 my-4" width="560" height="315" videoid="7dardvqBFbE" style="background-image: url('https://img.youtube.com/vi/7dardvqBFbE/maxresdefault.jpg')"></lite-youtube>
</div>
<h2 id="introduction">Introduction<a class="header-anchor" href="javascript:;" onclick="location.hash='#introduction'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>Every developer knows the struggle: you've written a fantastic application, it works flawlessly on your local machine, but now you need to get it out there in the world. The traditional cloud-native way often involves complex orchestration platforms like Kubernetes, which, while extremely powerful, can be overwhelming and overkill for smaller projects or applications with low traffic.</p>
<p>This is why we're going to explore an alternative and cost-effective approach in this blog post: deploying your web applications directly from GitHub to a Linux server, without the need for Kubernetes. This approach not only allows for affordable deployment of your applications but also promotes a quick and straightforward process, making it an excellent option for proof of concept or low-traffic applications.</p>
<p>This pattern we'll discuss consists of some core components: GitHub and its various functionalities, Docker Compose files, SSH for remote deployments, and a Linux server setup with an NGINX reverse proxy and LetsEncrypt companion containers for automation of routing, TLS, and certificate management.</p>
<p>By the end of this post, you will understand how to set up this deployment pattern. We will walk you through each step in detail, focusing on actionable, practical advice that you can apply right away.</p>
<p>Whether you're a .NET developer or working with other technologies, this pattern is flexible and can be adapted to your unique needs. As we progress, we will highlight how cost-effective and efficient this deployment strategy is for hosting your proof-of-concept, lower environment applications, or lower traffic systems, where horizontal scaling is not a necessity.</p>
<h2 id="understanding-the-core-components">Understanding the Core Components<a class="header-anchor" href="javascript:;" onclick="location.hash='#understanding-the-core-components'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>Before we get our hands dirty with deployment, let's take a moment to understand the essential components involved in this process. We'll also explain why we've chosen each one and how they contribute to our this cost-effective deployment pipeline.</p>
<h3 id="github-and-its-functions">GitHub and Its Functions<a class="header-anchor" href="javascript:;" onclick="location.hash='#github-and-its-functions'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>The backbone of our deployment pipeline is GitHub, a platform that provides a host of features to support our goals. Here are the key GitHub features we'll leverage:</p>
<ul>
<li><strong>GitHub Actions</strong>: These are automated workflows that will handle the process of Continuous Integration (CI) for our application. It checks out code, sets up .NET Core, builds, tests, and creates releases. We'll go into detail about this in the practical section.</li>
<li><strong>GitHub Action Secrets</strong>: Sensitive information like login credentials, tokens, or keys shouldn't be exposed in your codebase. GitHub Action Secrets are encrypted and allow us to store such information securely, which is essential for building and pushing Docker images.</li>
<li><strong>GitHub Container Registry (GHCR)</strong>: This is where our Docker images will be stored and versioned. GitHub Actions will build and push Docker images to GHCR, from where our Linux server will pull them during deployment.</li>
<li><strong>GitHub Repository</strong>: The central location where our application's codebase is stored. This is also where we'll configure GitHub Actions and store our Docker Compose files.</li>
</ul>
<h3 id="docker-compose">Docker Compose<a class="header-anchor" href="javascript:;" onclick="location.hash='#docker-compose'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>Docker Compose is a tool that helps with the management of multi-container Docker applications. It allows us to define our application's environment in a YAML file (<code>docker-compose.yml</code>), enabling consistent setups across different environments. This will be installed on your target Linux server, where it will be used to pull Docker images and run our application.</p>
<h3 id="secure-shell-ssh">Secure Shell (SSH)<a class="header-anchor" href="javascript:;" onclick="location.hash='#secure-shell-ssh'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>SSH is a protocol used for securely connecting to a remote server. In our deployment process, we'll use SSH for copying Docker Compose files and executing commands on the Linux server, such as pulling Docker images and running Docker Compose.
This is done via GitHub Actions where we will use the <code>ssh-action</code> to securely transfer the Docker Compose file to the Linux server, and execute commands remotely.</p>
<h3 id="linux-server-nginx-and-letsencrypt">Linux Server, NGINX, and LetsEncrypt<a class="header-anchor" href="javascript:;" onclick="location.hash='#linux-server-nginx-and-letsencrypt'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>Our Linux server is where everything comes together. It's where our application will be hosted, and where the Docker Compose file will be executed. But that's not all; we'll set up NGINX reverse proxy on this server to manage HTTP requests and responses between clients and our application.</p>
<p>We're also adding LetsEncrypt into the mix. LetsEncrypt will work in conjunction with NGINX to automate routing, provide Transport Layer Security (TLS), and manage SSL certificates. This combination will ensure our application is secure and readily accessible.</p>
<p>By understanding these core components, we can now piece together our deployment pipeline. But before we proceed, it's essential to ensure you have access to the required tools. Make sure you have a GitHub account, Docker installed on your local machine, access to a Linux server, and the necessary knowledge to work with these tools. Don't worry if you're unsure about any steps; we'll guide you through each stage as we move forward.</p>
<h2 id="setting-up-your-linux-server">Setting Up Your Linux Server<a class="header-anchor" href="javascript:;" onclick="location.hash='#setting-up-your-linux-server'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>The heart of your web application deployment, the Linux server, requires proper setup and configuration to ensure the deployment and operation of your applications. Here, we'll be using Ubuntu 22.04 as our target server, although you can adapt these instructions for other distributions as well.</p>
<p>Firstly, you need to ensure you have a Linux server at your disposal. This could be a virtual private server (VPS) from any cloud provider, a dedicated server, or even a Linux machine in your local network (provided it can be accessed via GitHub Actions).</p>
<p>Once you have access to your server, follow these steps:</p>
<h3 id="installing-docker-and-docker-compose">Installing Docker and Docker Compose<a class="header-anchor" href="javascript:;" onclick="location.hash='#installing-docker-and-docker-compose'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>Docker is a crucial component that enables us to build, ship, and run applications inside containers. Docker Compose, on the other hand, streamlines the process of managing multi-container Docker applications. Here's how to install them:</p>
<ol>
<li><strong>Update your server:</strong> Before we start, let's make sure our server has the latest updates. Run the following commands:
<pre><code>sudo apt update
sudo apt upgrade -y
</code></pre>
</li>
<li><strong>Install Docker:</strong> Docker provides an official guide to install Docker Engine on Ubuntu, which you can follow <a href="https://docs.docker.com/engine/install/ubuntu/">here</a>.</li>
</ol>
<p>By default, this should come with the latest version of Docker Compose. However, if you need to install Docker Compose separately, you can follow the official guide <a href="https://docs.docker.com/compose/install/">here</a>.</p>
<p>After the installation, confirm that Docker and Docker Compose have been correctly installed by running <code>docker --version</code> and <code>docker compose</code>. The terminal should print the version of Docker and show command options for Docker Compose, respectively.</p>
<h3 id="setting-up-nginx-and-letsencrypt">Setting up NGINX and LetsEncrypt<a class="header-anchor" href="javascript:;" onclick="location.hash='#setting-up-nginx-and-letsencrypt'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>Next, we will set up NGINX and LetsEncrypt in Docker containers. These are responsible for handling client requests, routing, SSL encryption, and certificate management.</p>
<ul>
<li><strong>Create the following YAML file</strong> on your Linux server:</li>
</ul>
<pre><code class="language-yaml">version: &quot;3.9&quot;

services:
  nginx-proxy:
    image: nginxproxy/nginx-proxy
    container_name: nginx-proxy
    restart: always
    ports:
      - &quot;80:80&quot;
      - &quot;443:443&quot;
    volumes:
      - conf:/etc/nginx/conf.d
      - vhost:/etc/nginx/vhost.d
      - html:/usr/share/nginx/html
      - dhparam:/etc/nginx/dhparam
      - certs:/etc/nginx/certs:ro
      - /var/run/docker.sock:/tmp/docker.sock:ro
    labels:
      - &quot;com.github.jrcs.letsencrypt_nginx_proxy_companion.nginx_proxy&quot;

  letsencrypt:
    image: nginxproxy/acme-companion:2.2
    container_name: nginx-proxy-le
    restart: always
    depends_on:
      - &quot;nginx-proxy&quot;
    environment:
      - DEFAULT_EMAIL=you@example.com
    volumes:
      - certs:/etc/nginx/certs:rw
      - acme:/etc/acme.sh
      - vhost:/etc/nginx/vhost.d
      - html:/usr/share/nginx/html
      - /var/run/docker.sock:/var/run/docker.sock:ro

networks:
  default:
    name: nginx

volumes:
  conf:
  vhost:
  html:
  dhparam:
  certs:
  acme:
</code></pre>
<ul>
<li><strong>Start the containers:</strong> Use the command <code>docker compose up -d</code> in the directory containing your <code>docker-compose.yml</code> file to start the NGINX reverse proxy and LetsEncrypt containers.</li>
</ul>
<p>With Docker, Docker Compose, NGINX, and LetsEncrypt setup, your Linux server is ready for deployments. Note that these are one-off tasks. Once set up, you won't need to repeat them for deploying additional applications.</p>
<p>For subsequent deployments, GitHub Actions will take care of creating necessary directories and SCP copying the <code>docker-compose.yml</code> file from the repository to the target Linux server. This allows your deployment pipeline to be flexible, repeatable, and reliable.</p>
<p><img src="./img/posts/docker-compose/linux-server.png" alt="" /></p>
<h2 id="github-the-backbone-of-your-deployment-pipeline">GitHub: The Backbone of Your Deployment Pipeline<a class="header-anchor" href="javascript:;" onclick="location.hash='#github-the-backbone-of-your-deployment-pipeline'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>In this section, we'll explore how to set up a GitHub-based deployment pipeline, using GitHub Actions for automation, GitHub Secrets for security, and the GitHub Container Registry for Docker image storage. You'll see how these tools can provide a powerful, end-to-end solution for building and deploying your applications.</p>
<h3 id="understanding-github-actions">Understanding GitHub Actions<a class="header-anchor" href="javascript:;" onclick="location.hash='#understanding-github-actions'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>GitHub Actions allow you to create custom software development life cycle (SDLC) workflows directly in your GitHub repository. These workflows are described in YAML files and can be triggered by GitHub events (such as pushing code, creating releases, etc.), on a schedule, or manually.</p>
<p>In the provided YAML, the deployment workflow is triggered on three events:</p>
<ol>
<li>A new GitHub release is published.</li>
<li>The build workflow has completed on <code>main</code> or <code>master</code> branches.</li>
<li>Manual trigger for rolling back to a specific release or redeploying the latest version.</li>
</ol>
<p>The jobs are divided into two parts: <code>push_to_registry</code> and <code>deploy_via_ssh</code>. The first job builds a Docker image from the repository's code and pushes it to GitHub's container registry. The second job deploys the image to a remote server via SSH.</p>
<h3 id="configuring-github-action-secrets">Configuring GitHub Action Secrets<a class="header-anchor" href="javascript:;" onclick="location.hash='#configuring-github-action-secrets'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>GitHub Secrets are encrypted environment variables created in your repository settings. They're a secure way to store and use sensitive information in GitHub Actions, like credentials, SSH keys, tokens, etc. Without them, this sensitive information would be exposed in your public repository.</p>
<p>The YAML script uses the following secrets:</p>
<ul>
<li><code>DEPLOY_HOST</code>: The IP address or domain name of the server where the application is deployed.</li>
<li><code>DEPLOY_USERNAME</code>: The username used for SSHing into the deployment server.</li>
<li><code>DEPLOY_KEY</code>: The private SSH key for the deployment server.</li>
<li><code>LETSENCRYPT_EMAIL</code>: The email used for Let's Encrypt certificate registration.</li>
</ul>
<p>These secrets can be set up in your repository settings under the <code>Secrets</code> section.</p>
<p><img src="./img/posts/docker-compose/secrets-separation.PNG" alt="" /></p>
<pre><code class="language-markdown">Go to `Settings` -&gt; `Secrets` -&gt; `New repository secret`
</code></pre>
<h3 id="leveraging-github-container-registry">Leveraging GitHub Container Registry<a class="header-anchor" href="javascript:;" onclick="location.hash='#leveraging-github-container-registry'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>The GitHub Container Registry is a place to store Docker images within GitHub, which can then be used in your GitHub Actions workflows or pulled directly to any server with Docker installed.</p>
<p>The following <code>release.yml</code> can be used with any dockerized application with a <code>docker-compose.yml</code>,<code>docker-compose.prod.yml</code> with an <code>app</code> and <code>app-migration</code> services, and the secrets above.</p>
<pre><code class="language-yaml">name: Release
permissions:
  packages: write
  contents: write
on:
  # Triggered on new GitHub Release
  release:
    types: [published]
  # Triggered on every successful Build action
  workflow_run:
    workflows: [&quot;Build&quot;]
    branches: [main,master]
    types:
      - completed
  # Manual trigger for rollback to specific release or redeploy latest
  workflow_dispatch:
    inputs:
      version:
        default: latest
        description: Tag you want to release.
        required: true

jobs:
  push_to_registry:
    runs-on: ubuntu-22.04
    if: ${‎{ github.event.workflow_run.conclusion != 'failure' }‎}
    steps:
      # Checkout latest or specific tag
      - name: checkout
        if: ${‎{ github.event.inputs.version == '' || github.event.inputs.version == 'latest' }‎}
        uses: actions/checkout@v3
      - name: checkout tag
        if: ${‎{ github.event.inputs.version != '' &amp;&amp; github.event.inputs.version != 'latest' }‎}
        uses: actions/checkout@v3
        with:
          ref: refs/tags/${‎{ github.event.inputs.version }‎}
          
      # Assign environment variables used in subsequent steps
      - name: Env variable assignment
        run: echo &quot;image_repository_name=$(echo ${‎{ github.repository }‎} | tr '[:upper:]' '[:lower:]')&quot; &gt;&gt; $GITHUB_ENV
      # TAG_NAME defaults to 'latest' if not a release or manual deployment
      - name: Assign version
        run: |
          echo &quot;TAG_NAME=latest&quot; &gt;&gt; $GITHUB_ENV
          if [ &quot;${‎{ github.event.release.tag_name }‎}&quot; != &quot;&quot; ]; then
            echo &quot;TAG_NAME=${‎{ github.event.release.tag_name }‎}&quot; &gt;&gt; $GITHUB_ENV
          fi;
          if [ &quot;${‎{ github.event.inputs.version }‎}&quot; != &quot;&quot; ]; then
            echo &quot;TAG_NAME=${‎{ github.event.inputs.version }‎}&quot; &gt;&gt; $GITHUB_ENV
          fi;
      
      - name: Login to GitHub Container Registry
        uses: docker/login-action@v2
        with:
          registry: ghcr.io
          username: ${‎{ github.actor }‎}
          password: ${‎{ secrets.GITHUB_TOKEN }‎}
      
      # Build and push new docker image, skip for manual redeploy other than 'latest'
      - name: Build and push Docker images
        uses: docker/build-push-action@v3
        if: ${‎{ github.event.inputs.version == '' || github.event.inputs.version == 'latest' }‎}
        with:
          file: Dockerfile
          context: .
          push: true
          tags: ghcr.io/${‎{ env.image_repository_name }‎}:${‎{ env.TAG_NAME }‎}
  
  deploy_via_ssh:
    needs: push_to_registry
    runs-on: ubuntu-22.04
    if: ${‎{ github.event.workflow_run.conclusion != 'failure' }‎}
    steps:
      # Checkout latest or specific tag
      - name: checkout
        if: ${‎{ github.event.inputs.version == '' || github.event.inputs.version == 'latest' }‎}
        uses: actions/checkout@v3
      - name: checkout tag
        if: ${‎{ github.event.inputs.version != '' &amp;&amp; github.event.inputs.version != 'latest' }‎}
        uses: actions/checkout@v3
        with:
          ref: refs/tags/${‎{ github.event.inputs.version }‎}

      - name: repository name fix and env
        run: |
          echo &quot;image_repository_name=$(echo ${‎{ github.repository }‎} | tr '[:upper:]' '[:lower:]')&quot; &gt;&gt; $GITHUB_ENV
          echo &quot;domain=${‎{ secrets.DEPLOY_HOST }‎}&quot; &gt;&gt; $GITHUB_ENV
          echo &quot;letsencrypt_email=${‎{ secrets.LETSENCRYPT_EMAIL }‎}&quot; &gt;&gt; $GITHUB_ENV
          echo &quot;TAG_NAME=latest&quot; &gt;&gt; $GITHUB_ENV
          if [ &quot;${‎{ github.event.release.tag_name }‎}&quot; != &quot;&quot; ]; then
            echo &quot;TAG_NAME=${‎{ github.event.release.tag_name }‎}&quot; &gt;&gt; $GITHUB_ENV
          fi;
          if [ &quot;${‎{ github.event.inputs.version }‎}&quot; != &quot;&quot; ]; then
            echo &quot;TAG_NAME=${‎{ github.event.inputs.version }‎}&quot; &gt;&gt; $GITHUB_ENV
          fi;

      - name: Create .env file
        run: |
          echo &quot;Generating .env file&quot;

          echo &quot;# Autogenerated .env file&quot; &gt; .env
          echo &quot;HOST_DOMAIN=${‎{ secrets.DEPLOY_HOST }‎}&quot; &gt;&gt; .env
          echo &quot;LETSENCRYPT_EMAIL=${‎{ secrets.LETSENCRYPT_EMAIL }‎}&quot; &gt;&gt; .env

          echo &quot;IMAGE_REPO=${‎{ env.image_repository_name }‎}&quot; &gt;&gt; .env
          echo &quot;RELEASE_VERSION=${‎{ env.TAG_NAME }‎}&quot; &gt;&gt; .env
      
      # Copy docker-compose and .env files to target server
      - name: copy files to target server via scp
        uses: appleboy/scp-action@v0.1.3
        with:
          host: ${‎{ secrets.DEPLOY_HOST }‎}
          username: ${‎{ secrets.DEPLOY_USERNAME }‎}
          port: 22
          key: ${‎{ secrets.DEPLOY_KEY }‎}
          source: &quot;./docker-compose.yml,./docker-compose.prod.yml,./.env&quot;
          target: &quot;~/.deploy/${‎{ github.event.repository.name }‎}/&quot;
      
      - name: Run remote db migrations
        uses: appleboy/ssh-action@v0.1.5
        env:
          APPTOKEN: ${‎{ secrets.GITHUB_TOKEN }‎}
          USERNAME: ${‎{ secrets.DEPLOY_USERNAME }‎}
        with:
          host: ${‎{ secrets.DEPLOY_HOST }‎}
          username: ${‎{ secrets.DEPLOY_USERNAME }‎}
          key: ${‎{ secrets.DEPLOY_KEY }‎}
          port: 22
          envs: APPTOKEN,USERNAME
          script: |
            echo $APPTOKEN | docker login ghcr.io -u $USERNAME --password-stdin
            cd ~/.deploy/${‎{ github.event.repository.name }‎}
            docker compose -f ./docker-compose.yml -f ./docker-compose.prod.yml pull
            docker compose -f ./docker-compose.yml -f ./docker-compose.prod.yml up app-migration

      # Deploy Docker image with your application using `docker compose up app` remotely
      - name: remote docker-compose up via ssh
        uses: appleboy/ssh-action@v0.1.5
        env:
          APPTOKEN: ${‎{ secrets.GITHUB_TOKEN }‎}
          USERNAME: ${‎{ secrets.DEPLOY_USERNAME }‎}
        with:
          host: ${‎{ secrets.DEPLOY_HOST }‎}
          username: ${‎{ secrets.DEPLOY_USERNAME }‎}
          key: ${‎{ secrets.DEPLOY_KEY }‎}
          port: 22
          envs: APPTOKEN,USERNAME
          script: |
            echo $APPTOKEN | docker login ghcr.io -u $USERNAME --password-stdin
            cd ~/.deploy/${‎{ github.event.repository.name }‎}
            docker compose -f ./docker-compose.yml -f ./docker-compose.prod.yml pull
            docker compose -f ./docker-compose.yml -f ./docker-compose.prod.yml up app -d
</code></pre>
<p>In the provided YAML, the image is built and pushed to the registry in the <code>push_to_registry</code> job with the <code>docker/build-push-action@v3</code> action.</p>
<pre><code class="language-yml">- name: Build and push Docker images
  uses: docker/build-push-action@v3
  if: ${‎{ github.event.inputs.version == '' || github.event.inputs.version == 'latest' }‎}
  with:
    file: Dockerfile
    context: .
    push: true
    tags: ghcr.io/${‎{ env.image_repository_name }‎}:${‎{ env.TAG_NAME }‎}
</code></pre>
<p>After building the Docker image, it is tagged and pushed to the GitHub Container Registry.</p>
<h2 id="using-github-action-secrets-for-multiple-applications">Using GitHub Action Secrets for Multiple Applications<a class="header-anchor" href="javascript:;" onclick="location.hash='#using-github-action-secrets-for-multiple-applications'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>In the YAML provided, the secrets are used in multiple places:</p>
<ul>
<li><code>GITHUB_TOKEN</code>: This is a system-generated token used by GitHub Actions to authorize interactions with the GitHub API and other services. Within the context of this workflow, <code>GITHUB_TOKEN</code> is used to authenticate Docker, allowing it to push images to and pull images from the GitHub Container Registry. This is generated for you based on the permissions you give the GitHub Actions workflow.</li>
<li><code>DEPLOY_HOST</code>: This secret represents the hostname to which SSH connections will be made during the deployment phase. This could be an IP address or a subdomain, as long as it's correctly set with an A record pointing to your server.</li>
<li><code>DEPLOY_USERNAME</code>: This secret corresponds to the username required for logging into the deployment server via SSH. The value for this secret can vary depending on your server setup. For example, it could be 'ubuntu', 'ec2-user', 'root', etc., depending on the operating system and configuration of the deployment server.</li>
<li><code>DEPLOY_KEY</code>: This is the private SSH key used for remote access to your deployment server or application host. This secret is crucial for securing your SSH connections. It's important to generate this key securely and to store it safely within your GitHub secrets to ensure your server remains secure.</li>
<li><code>LETSENCRYPT_EMAIL</code>: This secret represents the email address used for Let's Encrypt certificate registration. Let's Encrypt provides free automated TLS (Transport Layer Security) certificates, which help secure the communication between your server and its clients. The email is used to receive important notices.</li>
</ul>
<p>These secrets are utilized in both jobs, and they provide a secure way to use sensitive data across multiple steps.</p>
<pre><code class="language-yml"># Copy only the docker-compose.yml to remote server home folder
- name: copy files to target server via scp
  uses: appleboy/scp-action@v0.1.3
  with:
     host: ${‎{ secrets.DEPLOY_HOST }‎}
     username: ${‎{ secrets.DEPLOY_USERNAME }‎}
     port: 22
     key: ${‎{ secrets.DEPLOY_KEY }‎}
     source: &quot;./docker-compose.yml,./docker-compose.prod.yml,./.env&quot;
     target: &quot;~/.deploy/${‎{ github.event.repository.name }‎}/&quot;
</code></pre>
<p>In the example above, secrets are used to provide the <code>scp-action</code> with necessary information to copy our <code>docker-compose.yml</code>,<code>docker-compose.prod.yml</code>, and generated <code>.env</code> file to the remote server.</p>
<h2 id="how-they-all-work-together">How They All Work Together<a class="header-anchor" href="javascript:;" onclick="location.hash='#how-they-all-work-together'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>Having a clear grasp of the components involved in our deployment pipeline, it's now time to delve into how they work together end to end to deploy your dockerized application. This section will help you visualize the bigger picture, breaking down the deployment process into a series of understandable steps.</p>
<h3 id="setting-the-stage-the-deployment-process">Setting the Stage: The Deployment Process<a class="header-anchor" href="javascript:;" onclick="location.hash='#setting-the-stage-the-deployment-process'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>The deployment process is a series of operations that involve our main actors: GitHub, Docker, and your Linux server. Here is how each step unfolds:</p>
<ol>
<li>The process begins when the user triggers an event such as a push to the <code>main</code> or <code>master</code> branch, creates a release, or manually triggers a dispatch.</li>
<li>The GitHub repository responds to this by initiating the workflow defined in our GitHub Action.</li>
<li>The GitHub Action then retrieves the necessary secrets stored in GitHub Action Secrets. These are essential for secure operations such as logging into the GitHub Container Registry (GHCR).</li>
<li>After logging in, the GitHub Action builds the Docker image from your application's source code and pushes the image to GHCR.</li>
<li>Once the Docker image is securely stored in GHCR, the GitHub Action uses Secure Copy Protocol (SCP) to transfer the <code>docker-compose.yml</code>,<code>docker-compose.prod.yml</code>, and <code>.env</code> files to your remote Linux server.</li>
<li>Using SSH, the GitHub Action then logs into the remote server and runs the database migrations service defined in your <code>docker-compose.yml</code> file called the <code>app-migrate</code> service.</li>
<li>Finally, the GitHub Action instructs your server to pull the new Docker image from GHCR and start your application using Docker Compose.</li>
</ol>
<p><img src="./img/posts/docker-compose/sequence-diagram.PNG" alt="" /></p>
<p>Remember, this series of steps repeats each time a change triggers the GitHub Action, ensuring that your application is continuously integrated and deployed.</p>
<h3 id="flexibility">Flexibility<a class="header-anchor" href="javascript:;" onclick="location.hash='#flexibility'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>It's important to note that this process is not exclusive to a specific kind of application. The versatility of Docker allows us to adapt this process to deploy any web application that can be containerized using Docker, giving you a reliable and repeatable deployment process for a broad range of web applications.</p>
<h2 id="monitoring-with-lazydocker">Monitoring with LazyDocker<a class="header-anchor" href="javascript:;" onclick="location.hash='#monitoring-with-lazydocker'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>LazyDocker is a terminal UI for both Docker and Docker Compose. It allows you to monitor your Docker containers and services in real-time, giving you a visual representation of your application's health.</p>
<p>Part of what makes LazyDocker such an awesome tool is that you can use it anywhere from a terminal.</p>
<p><img src="./img/posts/docker-compose/lazydocker.png" alt="" /></p>
<p>To run it as a docker container itself, you can use the following command.</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>docker run --name lazydocker --rm -it -v /var/run/docker.sock:/var/run/docker.sock -v ~/.lazydocker:/.config/jessedufffield/lazydocker lazyteam/lazydocker</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>Or better yet, use it as an alias in your <code>.bashrc</code> or <code>.zshrc</code> file.</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>alias lazydocker=&quot;docker run --name lazydocker --rm -it -v /var/run/docker.sock:/var/run/docker.sock -v ~/.lazydocker:/.config/jessedufffield/lazydocker lazyteam/lazydocker&quot;</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>So you can run <code>lazydocker</code> easily from your terminal.</p>
<h2 id="concrete-example-deploying-a.net-application">Concrete Example: Deploying a .NET Application<a class="header-anchor" href="javascript:;" onclick="location.hash='#concrete-example-deploying-a.net-application'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>Let's see how you can use it to deploy a specific application. In this section, we will look at how to deploy a .NET application using the <code>release.yml</code> workflow.
It needs 3 files to run, as well as some GitHub Actions secrets like <code>DEPLOY_HOST</code>, <code>DEPLOY_USERNAME</code>, <code>DEPLOY_KEY</code>, and <code>LETSENCRYPT_EMAIL</code>.</p>
<h3 id="docker-compose.yml">docker-compose.yml<a class="header-anchor" href="javascript:;" onclick="location.hash='#docker-compose.yml'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>This file is used by Docker Compose to define the services that make up your application, so they can be run together in an isolated environment.
The <code>release.yml</code> expects a web application service called <code>app</code> and a database migration service called <code>app-migration</code> to be declared.</p>
<pre><code class="language-yaml">version: &quot;3.9&quot;
services:
   app:
      container_name: my_app
</code></pre>
<p>This file is the common denominator between your development and production environments. It is used by Docker Compose to build your application locally and by the <code>release.yml</code> workflow to deploy your application to your server.
We can control the behavior of Docker Compose for <a href="https://docs.docker.com/compose/multiple-compose-files/merge/">local development by using the <code>docker-compose.override.yml</code> file</a>, which is not used by the <code>release.yml</code> workflow.</p>
<h3 id="docker-compose.override.yml">docker-compose.override.yml<a class="header-anchor" href="javascript:;" onclick="location.hash='#docker-compose.override.yml'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>The override file is used by default when calling the command <code>docker compose up</code> without any arguments.</p>
<pre><code class="language-yaml">version: &quot;3.9&quot;
services:
  app:
    build: .
    ports:
      - &quot;5000:80&quot;
</code></pre>
<p>Here we are telling Docker Compose to build the application from the Dockerfile in the current directory and expose port 80 on the container to port 5000 on the host machine. This allows us to access the application locally at <code>http://localhost:5000</code>.</p>
<h3 id="docker-compose.prod.yml">docker-compose.prod.yml<a class="header-anchor" href="javascript:;" onclick="location.hash='#docker-compose.prod.yml'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>This file is similar to <code>docker-compose.yml</code>, but it is specifically tailored for your production environment. Instead of building from the Dockerfile like in the development version, it pulls a specific image from a repository (<code>ghcr.io/${IMAGE_REPO}:${RELEASE_VERSION}</code>) which come from a <code>.env</code> file.
It also connects to an external network (<code>nginx</code>) which is our reverse proxy on our target Linux server.</p>
<pre><code class="language-yaml">version: &quot;3.9&quot;
services:
   app:
      image: ghcr.io/${IMAGE_REPO}:${RELEASE_VERSION}
      restart: always
      ports:
         - &quot;80&quot;
      container_name: ${APP_NAME}_app
      environment:
         VIRTUAL_HOST: ${HOST_DOMAIN}
         LETSENCRYPT_HOST: ${HOST_DOMAIN}
         LETSENCRYPT_EMAIL: ${LETSENCRYPT_EMAIL}

networks:
   default:
      external: true
      name: nginx

</code></pre>
<h3 id="dockerfile">Dockerfile<a class="header-anchor" href="javascript:;" onclick="location.hash='#dockerfile'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>The Dockerfile is a text document that contains all the commands a user could call on the command line to assemble an image. In this example, it first creates a build environment based on <code>dotnet/sdk:6.0-focal</code>, copies your application code into the container, and restores any necessary .NET dependencies. It then switches to your application's directory and publishes your application in release mode. Finally, it creates the runtime environment based on <code>dotnet/aspnet:6.0-focal</code>, copies the built application from the previous stage, and sets the Docker entrypoint to run your application.</p>
<pre><code class="language-dockerfile"># Example dotnet app built from Dockerfile
FROM mcr.microsoft.com/dotnet/sdk:6.0-focal AS build
WORKDIR /app

COPY . .
RUN dotnet restore

WORKDIR /app/MyApp
RUN dotnet publish -c release -o /out --no-restore

FROM mcr.microsoft.com/dotnet/aspnet:6.0-focal AS runtime
WORKDIR /app
COPY --from=build /out .
ENTRYPOINT [&quot;dotnet&quot;, &quot;MyApp.dll&quot;]
</code></pre>
<h3 id="env-generated">.env (generated)<a class="header-anchor" href="javascript:;" onclick="location.hash='#env-generated'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>This file, <code>.env</code>, is a plain text file that stores environment variables for your Docker containers. Docker Compose automatically looks for this file in the same deployment directory as your <code>docker-compose.yml</code> and <code>docker-compose.prod.yml</code> files, and variables defined in <code>.env</code> can be read into the Compose file. The variables in this file could be secrets, URLs, or other configuration values. The <code>.env</code> file itself is typically not included in source control and instead, you might include a <code>.env.example</code> file to highlight the required environment variables.
This means when using <code>docker-compose.yml</code> locally, you can have a <code>.env</code> file with your local settings, and when using <code>docker-compose.prod.yml</code> on your server, you can have a <code>.env</code> file with your production settings, for example.</p>
<pre><code class="language-.env">HOST_DOMAIN=razor-pages.web-templates.io
LETSENCRYPT_EMAIL=team@servicestack.com
APP_NAME=razor-pages
IMAGE_REPO=netcoretemplates/razor-pages
RELEASE_VERSION=latest
</code></pre>
<h2 id="applying-the-deployment-pattern-a-practical-guide">Applying the Deployment Pattern: A Practical Guide<a class="header-anchor" href="javascript:;" onclick="location.hash='#applying-the-deployment-pattern-a-practical-guide'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>The following step-by-step guide will show you how to create, prepare, and deploy your .NET application using best practices.</p>
<h3 id="building-blocks-creating-your.net-application">1. Building Blocks: Creating Your .NET Application<a class="header-anchor" href="javascript:;" onclick="location.hash='#building-blocks-creating-your.net-application'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>Kick-off your development process by creating your .NET application. In this example, we use the ServiceStack's <code>x</code> tool to create our web app from a template with the command <code>x new web MyApp</code>.</p>
<p>Your application will have a structure that may look something like this:</p>
<pre><code>MyApp/
|-- MyApp/
|   |-- wwwroot/
|   |-- Configure.AppHost.cs
|   |-- Program.cs
|-- MyApp.ServiceModel/
|-- MyApp.ServiceInterface/
|-- MyApp.Tests/
|-- MyApp.sln
|-- Dockerfile
|-- docker-compose.yml
|-- docker-compose.prod.yml
|-- .gitignore
</code></pre>
<h3 id="join-the-hub-pushing-your-application-to-github">2. Join the Hub: Pushing Your Application to GitHub<a class="header-anchor" href="javascript:;" onclick="location.hash='#join-the-hub-pushing-your-application-to-github'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>Once your application is set up, you can push it to GitHub. JetBrains Rider IDE has a handy &quot;Share On GitHub&quot; functionality that streamlines this process. Here's how you use it:</p>
<ul>
<li>Right-click on your solution.</li>
<li>Select <code>Git -&gt; GitHub -&gt; Share Project on GitHub</code>.</li>
<li>Enter your repository name and description.</li>
<li>Click <code>Share</code>.</li>
</ul>
<p>Your .NET application is now on GitHub, ready for collaboration and continuous integration.</p>
<h3 id="implementing-github-actions-for-ci">3. Implementing GitHub Actions for CI<a class="header-anchor" href="javascript:;" onclick="location.hash='#implementing-github-actions-for-ci'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>To automate the build and test process every time you push to your GitHub repository, you can use GitHub Actions. A minimal .NET workflow file, <code>build.yml</code>, can be created and placed in the <code>.github/workflows</code> directory. Here's a minimal example:</p>
<pre><code class="language-yaml">name: Build
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2

    - name: Setup .NET
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: '6.0.x'

    - name: Restore dependencies
      run: dotnet restore

    - name: Build
      run: dotnet build --no-restore
</code></pre>
<p>You can also add a <code>test</code> step to run your tests here.</p>
<p>This will run alongside any other workflows, like the <code>release.yml</code> outlined above, to ensure your application is always in a deployable state.
When the <code>Build</code> step completes, it will trigger the <code>release.yml</code> workflow.</p>
<h3 id="setting-up-and-using-github-action-secrets">4. Setting Up and Using GitHub Action Secrets<a class="header-anchor" href="javascript:;" onclick="location.hash='#setting-up-and-using-github-action-secrets'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>Next, you'll need to create secrets for sensitive data. In GitHub, you can store them as &quot;Secrets&quot;. Follow these steps:</p>
<ul>
<li>Go to your GitHub repository and click on <code>Settings</code>.</li>
<li>Click on <code>Actions</code>-&gt;<code>Secrets</code> in the left sidebar.</li>
<li>Click on <code>New repository secret</code>.</li>
<li>Enter the <code>Name</code> and <code>Value</code> of the secret.</li>
<li>Click on <code>Add secret</code>.</li>
</ul>
<p>Create the following secrets:</p>
<ul>
<li><code>DEPLOY_HOST</code>: This secret represents the hostname to which SSH connections will be made during the deployment phase. This could be an IP address or a subdomain, as long as it's correctly set with an A record pointing to your server.</li>
<li><code>DEPLOY_USERNAME</code>: This secret corresponds to the username required for logging into the deployment server via SSH.</li>
<li><code>DEPLOY_KEY</code>: This is the private SSH key used for remote access to your deployment server or application host.</li>
<li><code>LETSENCRYPT_EMAIL</code>: This secret represents the email address used for Let's Encrypt certificate registration.</li>
</ul>
<h3 id="finding-your-home-create-an-a-record-dns-entry">5. Finding Your Home: Create an A Record DNS Entry<a class="header-anchor" href="javascript:;" onclick="location.hash='#finding-your-home-create-an-a-record-dns-entry'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>To link your domain to your server, you need to create an A Record DNS entry. Here's a generalized step-by-step:</p>
<ul>
<li>Go to your DNS provider's website and sign in.</li>
<li>Find the domain you want to update and go to its DNS records.</li>
<li>Create a new record. For the type, select <code>A</code>.</li>
<li>Enter your server's IP address in the <code>Value</code> or <code>Points to</code> field.</li>
<li>Save the changes.</li>
</ul>
<p>Now, you can populate the <code>DEPLOY_HOST</code> secret in GitHub with your DNS.
This will be used by the <code>release.yml</code> workflow to deploy your application to your server via SSH.</p>
<h3 id="configuring-linux-server-with-docker">6. Configuring Linux Server with Docker<a class="header-anchor" href="javascript:;" onclick="location.hash='#configuring-linux-server-with-docker'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>By now, you should have a Linux server with Docker installed, and the NGINX reverse proxy with LetsEncrypt running, as we did in the previous section.</p>
<p>Your server will also need to be accessible via SSH on port 22 so that GitHub Actions can deploy your application.</p>
<h3 id="commit-change-and-deploy-application">7. Commit Change and Deploy Application<a class="header-anchor" href="javascript:;" onclick="location.hash='#commit-change-and-deploy-application'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>Now, commit any changes and push to your GitHub repository. If you've set up your GitHub Actions correctly, the CI will kick off. After a successful build, your application will be deployed and accessible from your specified domain.</p>
<h2 id="deploying-multiple-applications-on-the-same-server">Deploying Multiple Applications on the Same Server<a class="header-anchor" href="javascript:;" onclick="location.hash='#deploying-multiple-applications-on-the-same-server'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<h3 id="same-pattern-multiple-applications">Same Pattern, Multiple Applications<a class="header-anchor" href="javascript:;" onclick="location.hash='#same-pattern-multiple-applications'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>One of the core strengths of Docker is the ability to isolate and manage applications in their individual containers. This means you can deploy numerous applications, each from its separate GitHub repository, onto the same Linux server. All these applications can coexist and operate independently, provided each one is correctly dockerized. The release pattern remains unchanged and consistent to apply.</p>
<pre><code class="language-markdown">1. MyApp1/ -&gt; GitHub Repo 1 -&gt; Docker Image 1 -&gt; Server (Container 1)
2. MyApp2/ -&gt; GitHub Repo 2 -&gt; Docker Image 2 -&gt; Server (Container 2)
3. MyApp3/ -&gt; GitHub Repo 3 -&gt; Docker Image 3 -&gt; Server (Container 3)
</code></pre>
<p><img src="./img/posts/docker-compose/graph-diagram.PNG" alt="" /></p>
<h3 id="organization-secrets">Organization Secrets<a class="header-anchor" href="javascript:;" onclick="location.hash='#organization-secrets'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>To maintain a streamlined deployment process when dealing with multiple applications, you can utilize the GitHub Actions' Organization Secrets. This feature allows secrets to be shared across multiple repositories in an organization, which saves time and reduces redundancy. The only secret that needs to be set up individually for each repository would be the <code>DEPLOY_HOST</code> and corresponding DNS for each application.</p>
<p>To set up organization secrets:</p>
<ul>
<li>Go to your GitHub organization's settings.</li>
<li>Click on <code>Secrets</code> in the left sidebar.</li>
<li>Click on <code>New organization secret</code>.</li>
<li>Enter the <code>Name</code> and <code>Value</code> of the secret.</li>
<li>Click on <code>Add secret</code>.</li>
</ul>
<p>Each deployed application now shares the organization-level secrets, streamline the setup process for new applications to a new DNS entry and <code>DEPLOY_HOST</code> environment variable.</p>
<p>And since every GitHub Repository in the organization is unique, there is no conflicting files deployed to the same server.</p>
<h3 id="cost-optimization-using-a-single-server">Cost Optimization: Using a Single Server<a class="header-anchor" href="javascript:;" onclick="location.hash='#cost-optimization-using-a-single-server'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>In our previous post,<a href="/posts/hetzner-cloud">In pursuit of the best value US cloud provider</a>, we looked for the most cost-effective cloud provider. We found that Hetzner Cloud offers the best value for money, with a powerful server costing around $10 USD per month. This means you can deploy multiple applications on a single server, saving you money and resources.</p>
<p>To host lots of our demo applications, we are doing exactly this, meaning we have a per container of less than $0.50 USD per month.</p>
<div class="mx-auto mt-4 mb-4">
    <div class="inline-flex justify-center w-full">
      <img src="/img/posts/docker-compose/cloud-cost-comparison.PNG" alt="">
    </div>
</div>
<h2 id="conclusion">Conclusion<a class="header-anchor" href="javascript:;" onclick="location.hash='#conclusion'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>By avoiding Kubernetes, you can have less complex control your deployment process, and have more control over your applications. You can also save money by using a single server to host multiple applications. The release pattern is a flexible, yet effective way to deploy your applications, and it can be applied to any programming language or framework.</p>
<h2 id="feedback">Feedback<a class="header-anchor" href="javascript:;" onclick="location.hash='#feedback'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>If you have any feedback on this article, please let us know by commenting below, joining our <a href="https://servicestack.net/discord">Discord</a>, <a href="https://servicestack.net/ask">GitHub Discussions</a>, or <a href="https://forums.servicestack.net">Customer Forums</a>.</p>

                </div>
            </div>
        </article>
</div>

<div id="comments" data-post="PostComments" class="my-48"></div>

        <div class="bg-gray-50 py-20">
            <div class="max-w-3xl mx-auto">
                <div class="flex justify-between">
                    <div>
                            <a href="posts/author/darren-reid"><img class="w-20 h-20 rounded-full text-cyan-600" src="/img/authors/darren.jpg"></a>

                        <div class="mt-2 font-medium text-2xl">
                            Written by Darren Reid
                        </div>
                        <div class="text-gray-600">
                            Developer @ServiceStack, Tech author &#x2B; consultant, renewable energy nerd, fetcher of treats for 2 Greyhounds.
                        </div>
                    </div>
                    <div class="flex items-end">
            <ul role="list" class="flex">
                    <li>
                        <a title="Follow on Mastodon" class="mr-1 group flex text-sm font-medium text-zinc-800 transition hover:text-indigo-500 dark:text-zinc-200 dark:hover:text-indigo-500" href="https://reidodon.net/@layoric">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 flex-none text-zinc-500 fill-zinc-500 transition group-hover:fill-indigo-500" width="24" height="24" viewBox="0 0 24 24">
                                <path fill="currentColor" d="M20.94 14c-.28 1.41-2.44 2.96-4.97 3.26c-1.31.15-2.6.3-3.97.24c-2.25-.11-4-.54-4-.54v.62c.32 2.22 2.22 2.35 4.03 2.42c1.82.05 3.44-.46 3.44-.46l.08 1.65s-1.28.68-3.55.81c-1.25.07-2.81-.03-4.62-.5c-3.92-1.05-4.6-5.24-4.7-9.5l-.01-3.43c0-4.34 2.83-5.61 2.83-5.61C6.95 2.3 9.41 2 11.97 2h.06c2.56 0 5.02.3 6.47.96c0 0 2.83 1.27 2.83 5.61c0 0 .04 3.21-.39 5.43M18 8.91c0-1.08-.3-1.91-.85-2.56c-.56-.63-1.3-.96-2.23-.96c-1.06 0-1.87.41-2.42 1.23l-.5.88l-.5-.88c-.56-.82-1.36-1.23-2.43-1.23c-.92 0-1.66.33-2.23.96C6.29 7 6 7.83 6 8.91v5.26h2.1V9.06c0-1.06.45-1.62 1.36-1.62c1 0 1.5.65 1.5 1.93v2.79h2.07V9.37c0-1.28.5-1.93 1.51-1.93c.9 0 1.35.56 1.35 1.62v5.11H18V8.91Z"/>
                            </svg>
                        </a>
                    </li>
                    <li>
                        <a title="Follow on GitHub" class="mr-1 group flex text-sm font-medium text-zinc-800 transition hover:text-indigo-500 dark:text-zinc-200 dark:hover:text-indigo-500" href="https://github.com/layoric">
                            <svg viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6 flex-none text-zinc-500 fill-zinc-500 transition group-hover:fill-indigo-500">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.475 2 2 6.588 2 12.253c0 4.537 2.862 8.369 6.838 9.727.5.09.687-.218.687-.487 0-.243-.013-1.05-.013-1.91C7 20.059 6.35 18.957 6.15 18.38c-.113-.295-.6-1.205-1.025-1.448-.35-.192-.85-.667-.013-.68.788-.012 1.35.744 1.538 1.051.9 1.551 2.338 1.116 2.912.846.088-.666.35-1.115.638-1.371-2.225-.256-4.55-1.14-4.55-5.062 0-1.115.387-2.038 1.025-2.756-.1-.256-.45-1.307.1-2.717 0 0 .837-.269 2.75 1.051.8-.23 1.65-.346 2.5-.346.85 0 1.7.115 2.5.346 1.912-1.333 2.75-1.05 2.75-1.05.55 1.409.2 2.46.1 2.716.637.718 1.025 1.628 1.025 2.756 0 3.934-2.337 4.806-4.562 5.062.362.32.675.936.675 1.897 0 1.371-.013 2.473-.013 2.82 0 .268.188.589.688.486a10.039 10.039 0 0 0 4.932-3.74A10.447 10.447 0 0 0 22 12.253C22 6.588 17.525 2 12 2Z"></path>
                            </svg>
                        </a>
                    </li>
                    <li>
                        <a title="Email Darren Reid" href="mailto:darren@servicestack.com" class="mr-1 group flex text-sm font-medium text-zinc-800 transition hover:text-indigo-500 dark:text-zinc-200 dark:hover:text-indigo-500">
                            <svg class="h-6 w-6 flex-none text-zinc-500 fill-zinc-500 transition group-hover:fill-indigo-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.413-.588T2 18V6q0-.825.588-1.413T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.588 1.413T20 20H4Zm8-7L4 8v10h16V8l-8 5Zm0-2l8-5H4l8 5ZM4 8V6v12V8Z"/></svg>
                        </a>
                    </li>
            </ul>
                    </div>
                </div>

                <div class="mt-4 border-t">
                    <div class="py-8 text-lg text-gray-700 font-medium">
                        More from Darren Reid
                    </div>
                    <div class="grid grid-cols-2 gap-8">
                            <div>
                                <div class="flex flex-col overflow-hidden">
                                    <div class="flex-shrink-0">
                                        <a href="posts/kamal-deployments">
                                            <img class="h-48 w-full object-cover" src="./img/posts/kamal-deployments/bg.webp" alt="">
                                        </a>
                                    </div>
                                    <div class="flex flex-1 flex-col justify-between bg-white dark:bg-black p-6">
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-indigo-600 dark:text-indigo-300">
                                                Article
                                            </p>
                                            <a href="posts/kamal-deployments" class="mt-2 block">
                                                <p class="text-xl font-semibold text-gray-900 dark:text-gray-50 whitespace-nowrap overflow-hidden text-ellipsis" title=".NET 8 Templates migrated to use Kamal for deployments">
                                                    .NET 8 Templates migrated to use Kamal for deployments
                                                </p>
                                                <p class="mt-3 text-base text-gray-500">All Identity Auth templates now use Kamal for deployments, simplifying the process of deploying .NET Apps to any Linux server.</p>
                                            </a>
                                        </div>
                                        <div class="mt-6 flex items-center">
                                            <div class="flex-shrink-0">
                                                <a href="">
                                                    <span class="sr-only">Darren Reid</span>
                                                    <img class="h-10 w-10 rounded-full" src="/img/authors/darren.jpg" alt=".NET 8 Templates migrated to use Kamal for deployments background">
                                                </a>
                                            </div>
                                            <div class="ml-3">
                                                <p class="text-sm font-medium text-gray-900">
                                                        <a href="posts/author/darren-reid" class="hover:underline">Darren Reid</a>
                                                </p>
                                                <div class="flex space-x-1 text-sm text-gray-500">
                                                    <time datetime="2024-12-05T00:00:00.0000000">December 5, 2024</time>
                                                    <span aria-hidden="true">&middot;</span>
                                                    <span>5 min read</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div>
                                <div class="flex flex-col overflow-hidden">
                                    <div class="flex-shrink-0">
                                        <a href="posts/redis-outputcache">
                                            <img class="h-48 w-full object-cover" src="./img/posts/redis-outputcache/bg.webp" alt="">
                                        </a>
                                    </div>
                                    <div class="flex flex-1 flex-col justify-between bg-white dark:bg-black p-6">
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-indigo-600 dark:text-indigo-300">
                                                Article
                                            </p>
                                            <a href="posts/redis-outputcache" class="mt-2 block">
                                                <p class="text-xl font-semibold text-gray-900 dark:text-gray-50 whitespace-nowrap overflow-hidden text-ellipsis" title="Using ASP.NET Core Output Caching">
                                                    Using ASP.NET Core Output Caching
                                                </p>
                                                <p class="mt-3 text-base text-gray-500">How to use ASP.NET Core Output Caching to cache the response of a ServiceStack Service using ServiceStack.Redis</p>
                                            </a>
                                        </div>
                                        <div class="mt-6 flex items-center">
                                            <div class="flex-shrink-0">
                                                <a href="">
                                                    <span class="sr-only">Darren Reid</span>
                                                    <img class="h-10 w-10 rounded-full" src="/img/authors/darren.jpg" alt="Using ASP.NET Core Output Caching background">
                                                </a>
                                            </div>
                                            <div class="ml-3">
                                                <p class="text-sm font-medium text-gray-900">
                                                        <a href="posts/author/darren-reid" class="hover:underline">Darren Reid</a>
                                                </p>
                                                <div class="flex space-x-1 text-sm text-gray-500">
                                                    <time datetime="2024-06-05T00:00:00.0000000">June 5, 2024</time>
                                                    <span aria-hidden="true">&middot;</span>
                                                    <span>5 min read</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div>
                                <div class="flex flex-col overflow-hidden">
                                    <div class="flex-shrink-0">
                                        <a href="posts/asp-rate-limiter-middleware">
                                            <img class="h-48 w-full object-cover" src="./img/posts/asp-rate-limiter-middleware/bg.webp" alt="">
                                        </a>
                                    </div>
                                    <div class="flex flex-1 flex-col justify-between bg-white dark:bg-black p-6">
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-indigo-600 dark:text-indigo-300">
                                                Article
                                            </p>
                                            <a href="posts/asp-rate-limiter-middleware" class="mt-2 block">
                                                <p class="text-xl font-semibold text-gray-900 dark:text-gray-50 whitespace-nowrap overflow-hidden text-ellipsis" title="Using ASP.NET Core Rate Limiter Middleware">
                                                    Using ASP.NET Core Rate Limiter Middleware
                                                </p>
                                                <p class="mt-3 text-base text-gray-500">Learn how to use the new Rate Limiter Middleware in ServiceStack to protect your APIs from abuse.</p>
                                            </a>
                                        </div>
                                        <div class="mt-6 flex items-center">
                                            <div class="flex-shrink-0">
                                                <a href="">
                                                    <span class="sr-only">Darren Reid</span>
                                                    <img class="h-10 w-10 rounded-full" src="/img/authors/darren.jpg" alt="Using ASP.NET Core Rate Limiter Middleware background">
                                                </a>
                                            </div>
                                            <div class="ml-3">
                                                <p class="text-sm font-medium text-gray-900">
                                                        <a href="posts/author/darren-reid" class="hover:underline">Darren Reid</a>
                                                </p>
                                                <div class="flex space-x-1 text-sm text-gray-500">
                                                    <time datetime="2024-04-08T00:00:00.0000000">April 8, 2024</time>
                                                    <span aria-hidden="true">&middot;</span>
                                                    <span>6 min read</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div>
                                <div class="flex flex-col overflow-hidden">
                                    <div class="flex-shrink-0">
                                        <a href="posts/blazor-8-admin">
                                            <img class="h-48 w-full object-cover" src="./img/posts/blazor-8-admin/bg.webp" alt="">
                                        </a>
                                    </div>
                                    <div class="flex flex-1 flex-col justify-between bg-white dark:bg-black p-6">
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-indigo-600 dark:text-indigo-300">
                                                Article
                                            </p>
                                            <a href="posts/blazor-8-admin" class="mt-2 block">
                                                <p class="text-xl font-semibold text-gray-900 dark:text-gray-50 whitespace-nowrap overflow-hidden text-ellipsis" title="New Blazor Interactive Auto Template with Custom Admin UIs">
                                                    New Blazor Interactive Auto Template with Custom Admin UIs
                                                </p>
                                                <p class="mt-3 text-base text-gray-500">Discover how to use ServiceStack.Blazor components to quickly create customizable and professional-looking admin pages in a Blazor application</p>
                                            </a>
                                        </div>
                                        <div class="mt-6 flex items-center">
                                            <div class="flex-shrink-0">
                                                <a href="">
                                                    <span class="sr-only">Darren Reid</span>
                                                    <img class="h-10 w-10 rounded-full" src="/img/authors/darren.jpg" alt="New Blazor Interactive Auto Template with Custom Admin UIs background">
                                                </a>
                                            </div>
                                            <div class="ml-3">
                                                <p class="text-sm font-medium text-gray-900">
                                                        <a href="posts/author/darren-reid" class="hover:underline">Darren Reid</a>
                                                </p>
                                                <div class="flex space-x-1 text-sm text-gray-500">
                                                    <time datetime="2024-02-26T00:00:00.0000000">February 26, 2024</time>
                                                    <span aria-hidden="true">&middot;</span>
                                                    <span>7 min read</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                    </div>
                </div>
            </div>
        </div>

<script type="module">
import { init } from "app.mjs"
init()
</script>

<link rel="stylesheet" href="css/highlight.css">
<script src="js/highlight.js"></script>
<script>hljs.highlightAll()</script>
<script src="js/lite-yt-embed.js"></script>
<script src="mjs/docs.mjs" type="module"></script>


<script type="module">
import { mount } from "app.mjs"

    const App = {
        setup() {
            function nav(url) {
                window.open(url)
            }
            return { nav }
        }
    }
    mount('#post', App)
</script>

    </main>
</div>

<footer class="bg-slate-200 dark:bg-black border-t border-slate-300 dark:border-gray-600 py-8 sm:py-12">
    <div class="max-w-screen-2xl mx-auto px-5">
        <div class="sm:flex sm:flex-wrap sm:-mx-4 md:py-4">
            <div class="px-4 sm:w-1/2 md:w-1/4 xl:w-1/6">
                <h5 class="block uppercase text-slate-500 font-semibold mb-4">Features</h5>
                <div>
                    <a href="https://localhost:5002/service-reference" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">ServiceStack Reference</a>
                    <a href="https://localhost:5002/creatorkit/" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">CreatorKit</a>
                    <a href="https://localhost:5002/litestream" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Litestream</a>
                    <a href="https://localhost:5002/ormlite" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">OrmLite</a>
                    <a href="https://localhost:5002/redis" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Redis</a>
                    <a href="https://localhost:5002/locode" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Locode</a>
                    <a href="https://www.jamstacks.net" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Jamstack</a>
                </div>
            </div>
            <div class="px-4 sm:w-1/2 md:w-1/4 xl:w-1/6 mt-8 sm:mt-0">
                <h5 class="block uppercase text-slate-500 font-semibold mb-4">Resources</h5>
                <div>
                    <a href="https://docs.servicestack.net" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Framework Docs</a>
                    <a href="https://forums.servicestack.net" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Customer Forums</a>
                    <a href="https://docs.servicestack.net/redis/" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">ServiceStack.Redis</a>
                    <a href="https://docs.servicestack.net/ormlite/" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">ServiceStack.OrmLite</a>
                    <a href="https://docs.servicestack.net/text" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">ServiceStack.Text</a>
                    <a href="https://docs.servicestack.net/aws" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">ServiceStack.Aws</a>
                    <a href="https://github.com/NetCoreApps/LiveDemos" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Live Demos</a>
                    <a href="https://localhost:5002/posts/" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Blog Archive</a>
                </div>
            </div>
            <div class="px-4 sm:w-1/2 md:w-1/4 xl:w-1/6 mt-8 md:mt-0">
                <h5 class="block uppercase text-slate-500 font-semibold mb-4">Learn</h5>
                <div>
                    <a href="https://docs.servicestack.net/why-servicestack" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Why ServiceStack</a>
                    <a href="https://docs.servicestack.net/architecture-overview" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Architecture</a>
                    <a href="https://docs.servicestack.net/explore-servicestack" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Explore ServiceStack</a>
                    <a href="https://docs.servicestack.net/api-first-development" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">API First Development</a>
                    <a href="https://docs.servicestack.net/service-complexity-and-dto-roles" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">The Simple POCO Life</a>
                    <a href="https://localhost:5002/training" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Training Services</a>
                </div>
            </div>
            <div class="px-4 sm:w-1/2 md:w-1/4 xl:w-1/6 mt-8 md:mt-0">
                <h5 class="block uppercase text-slate-500 font-semibold mb-4">About</h5>
                <div>
                    <a href="https://localhost:5002/support" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Support</a>
                    <a href="https://localhost:5002/whatsnew" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">What's New</a>
                    <a href="https://localhost:5002/#contact" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Contact Us</a>
                    <a href="https://localhost:5002/privacy" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Privacy</a>
                    <a href="https://localhost:5002/terms" class="text-slate-600 hover:text-slate-800 dark:hover:text-slate-100 font-semibold block pb-2 text-sm">Terms</a>
                </div>
            </div>
            <div class="px-4 mt-4 flex justify-end">
                <div class="max-w-sm">
                    <div class="mx-auto">
                        <h5 class="block uppercase text-slate-500 font-semibold mb-4">Stay connected</h5>

                        <div class="mt-6 lg:mb-0 mb-6">
                            <a href="https://twitter.com/ServiceStack" class="inline-block bg-white dark:bg-gray-800 p-2 text-blue-400 shadow-lg font-normal items-center justify-center align-center rounded-full outline-none focus:outline-none mr-2">
                                <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M22.46 6c-.77.35-1.6.58-2.46.69c.88-.53 1.56-1.37 1.88-2.38c-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29c0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15c0 1.49.75 2.81 1.91 3.56c-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07a4.28 4.28 0 0 0 4 2.98a8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21C16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56c.84-.6 1.56-1.36 2.14-2.23Z"/></svg>
                            </a>
                            <a href="https://www.youtube.com/channel/UC0kXKGVU4NHcwNdDdRiAJSA" class="inline-block bg-white dark:bg-gray-800 p-2 text-red-600 shadow-lg font-normal items-center justify-center align-center rounded-full outline-none focus:outline-none mr-2">
                                <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M21.543 6.498C22 8.28 22 12 22 12s0 3.72-.457 5.502c-.254.985-.997 1.76-1.938 2.022C17.896 20 12 20 12 20s-5.893 0-7.605-.476c-.945-.266-1.687-1.04-1.938-2.022C2 15.72 2 12 2 12s0-3.72.457-5.502c.254-.985.997-1.76 1.938-2.022C6.107 4 12 4 12 4s5.896 0 7.605.476c.945.266 1.687 1.04 1.938 2.022zM10 15.5l6-3.5l-6-3.5v7z"/></svg>
                            </a>
                            <a href="https://github.com/ServiceStack" class="inline-block bg-white dark:bg-gray-800 p-2 text-slate-800 shadow-lg font-normal items-center justify-center align-center rounded-full outline-none focus:outline-none mr-2">
                                <svg class="h-6 w-6 dark:text-white" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg>
                            </a>
                        </div>
                    </div>
                    <div class="mt-8" data-mail="JoinMailingList" data-props="{ submitLabel:'Join our newsletter' }"></div>
                </div>
            </div>
        </div>

        <div class="sm:flex sm:flex-wrap sm:-mx-4 mt-6 pt-6 sm:mt-12 sm:pt-12 border-t dark:border-gray-700">
            <div class="sm:w-full px-4 md:w-1/6">
                <b>About ServiceStack</b>
            </div>
            <div class="px-4 sm:w-1/2 mt-4 md:mt-0 text-sm text-gray-600">
                ServiceStack started development in 2008 with the mission of creating a best-practices services framework
                with an emphasis on simplicity and speed, reducing the effort in creating and maintaining resilient
                message-based SOA Services and rich web apps like <a href="https://pvq.app">pvq</a>.

                <p class="pt-2">Copyright (c) ServiceStack Inc. 2024</p>
            </div>
            <div class="px-4 md:w-1/4 md:ml-auto mt-6 sm:mt-4 md:mt-0">
                <a href="https://localhost:5002/start"
                   class="bg-slate-800 text-white active:bg-slate-600 text-sm font-semibold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150">
                    Get started
                </a>
            </div>
        </div>        
        
    </div>
</footer>

<script type="module">
import { mail } from 'https://localhost:5003/mjs/components/mail.mjs'
import { post } from 'https://localhost:5003/mjs/components/post.mjs'

mail('[data-mail]', { mailingLists:['MonthlyNewsletter'] })
post('[data-post]', {
    commentLink: { 
        href: '/community-rules',
        label: 'read the community rules'
    } 
})
</script>


<script type="module">
import { init } from "app.mjs"
init()
</script>



</body>
</html>